{"ast":null,"code":"import axios from 'axios';\nimport { message } from 'antd';\n\n// åˆ›å»ºaxioså®žä¾‹\nconst api = axios.create({\n  baseURL: process.env.REACT_APP_API_BASE_URL || 'http://localhost:3000/v1',\n  timeout: 10000\n});\n\n// æ‰“å°APIé…ç½®ä¿¡æ¯\nconsole.log('ðŸ”— APIé…ç½®:', {\n  baseURL: api.defaults.baseURL,\n  timeout: api.defaults.timeout\n});\n\n// è¯·æ±‚æ‹¦æˆªå™¨ - æ·»åŠ token\napi.interceptors.request.use(config => {\n  const token = localStorage.getItem('admin_token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n\n// å“åº”æ‹¦æˆªå™¨ - å¤„ç†é”™è¯¯\napi.interceptors.response.use(response => {\n  return response;\n}, error => {\n  console.error('APIè¯·æ±‚é”™è¯¯:', error);\n  if (error.response) {\n    const {\n      status,\n      data\n    } = error.response;\n    switch (status) {\n      case 401:\n        // Tokenè¿‡æœŸæˆ–æ— æ•ˆ\n        localStorage.removeItem('admin_token');\n        localStorage.removeItem('admin_permissions');\n        localStorage.removeItem('admin_expire_time');\n        if (window.location.pathname !== '/login') {\n          message.error('ç™»å½•å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•');\n          window.location.href = '/login';\n        }\n        break;\n      case 403:\n        message.error('æƒé™ä¸è¶³');\n        break;\n      case 404:\n        message.error('è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨');\n        break;\n      case 500:\n        message.error('æœåŠ¡å™¨å†…éƒ¨é”™è¯¯');\n        break;\n      default:\n        if (data !== null && data !== void 0 && data.message) {\n          message.error(data.message);\n        } else {\n          message.error('è¯·æ±‚å¤±è´¥');\n        }\n    }\n  } else if (error.request) {\n    message.error('ç½‘ç»œè¿žæŽ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè®¾ç½®');\n  } else {\n    message.error('è¯·æ±‚é…ç½®é”™è¯¯');\n  }\n  return Promise.reject(error);\n});\n\n// APIæŽ¥å£å®šä¹‰\nexport const adminAPI = {\n  // è®¤è¯ç›¸å…³\n  login: password => api.post('/admin/login', {\n    password\n  }),\n  logout: () => api.post('/admin/logout'),\n  getProfile: () => api.get('/admin/profile'),\n  // ç”¨æˆ·æ± ç®¡ç†\n  getUserPool: params => api.get('/admin/user-pool', {\n    params\n  }),\n  getUserDetail: userId => api.get(`/admin/users/${userId}`),\n  updateUserStatus: (userId, status, reason) => api.put(`/admin/users/${userId}/status`, {\n    status,\n    reason\n  }),\n  assignUser: (userId, providerId, notes) => api.post('/admin/assign-user', {\n    userId,\n    providerId,\n    notes\n  }),\n  batchAssignUsers: (userIds, algorithm, preferences) => api.post('/admin/auto-assign', {\n    userIds,\n    algorithm,\n    preferences\n  }),\n  // æœåŠ¡è€…ç®¡ç†\n  getServiceProviders: params => api.get('/admin/service-providers', {\n    params\n  }),\n  getProviderDetail: providerId => api.get(`/admin/service-providers/${providerId}`),\n  updateProviderInfo: (providerId, data) => api.put(`/admin/service-providers/${providerId}`, data),\n  updateProviderServiceArea: (providerId, serviceArea) => api.put(`/admin/service-providers/${providerId}/service-area`, {\n    serviceArea\n  }),\n  // åˆ†é…ç®¡ç†\n  getAssignments: params => api.get('/admin/assignments', {\n    params\n  }),\n  getAssignmentHistory: params => api.get('/admin/assignment-history', {\n    params\n  }),\n  cancelAssignment: (assignmentId, reason) => api.post(`/admin/assignments/${assignmentId}/cancel`, {\n    reason\n  }),\n  // ç»Ÿè®¡æ•°æ®\n  getDashboardStats: () => api.get('/admin/dashboard/stats'),\n  getGeoData: () => api.get('/admin/dashboard/geo-data'),\n  getAssignmentTrends: timeRange => api.get('/admin/dashboard/assignment-trends', {\n    params: {\n      timeRange\n    }\n  }),\n  // æ•°æ®å¯¼å‡º\n  exportUserData: (userIds, format) => api.get('/admin/users/export', {\n    params: {\n      userIds: userIds.join(','),\n      format\n    },\n    responseType: 'blob'\n  })\n};\nexport default api;","map":{"version":3,"names":["axios","message","api","create","baseURL","process","env","REACT_APP_API_BASE_URL","timeout","console","log","defaults","interceptors","request","use","config","token","localStorage","getItem","headers","Authorization","error","Promise","reject","response","status","data","removeItem","window","location","pathname","href","adminAPI","login","password","post","logout","getProfile","get","getUserPool","params","getUserDetail","userId","updateUserStatus","reason","put","assignUser","providerId","notes","batchAssignUsers","userIds","algorithm","preferences","getServiceProviders","getProviderDetail","updateProviderInfo","updateProviderServiceArea","serviceArea","getAssignments","getAssignmentHistory","cancelAssignment","assignmentId","getDashboardStats","getGeoData","getAssignmentTrends","timeRange","exportUserData","format","join","responseType"],"sources":["D:/ProjectPackage/claude_code_project/RedCellProject/wx_mini_program/admin-portal/src/utils/api.js"],"sourcesContent":["import axios from 'axios';\nimport { message } from 'antd';\n\n// åˆ›å»ºaxioså®žä¾‹\nconst api = axios.create({\n  baseURL: process.env.REACT_APP_API_BASE_URL || 'http://localhost:3000/v1',\n  timeout: 10000,\n});\n\n// æ‰“å°APIé…ç½®ä¿¡æ¯\nconsole.log('ðŸ”— APIé…ç½®:', {\n  baseURL: api.defaults.baseURL,\n  timeout: api.defaults.timeout\n});\n\n// è¯·æ±‚æ‹¦æˆªå™¨ - æ·»åŠ token\napi.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem('admin_token');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\n// å“åº”æ‹¦æˆªå™¨ - å¤„ç†é”™è¯¯\napi.interceptors.response.use(\n  (response) => {\n    return response;\n  },\n  (error) => {\n    console.error('APIè¯·æ±‚é”™è¯¯:', error);\n\n    if (error.response) {\n      const { status, data } = error.response;\n      \n      switch (status) {\n        case 401:\n          // Tokenè¿‡æœŸæˆ–æ— æ•ˆ\n          localStorage.removeItem('admin_token');\n          localStorage.removeItem('admin_permissions');\n          localStorage.removeItem('admin_expire_time');\n          \n          if (window.location.pathname !== '/login') {\n            message.error('ç™»å½•å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•');\n            window.location.href = '/login';\n          }\n          break;\n          \n        case 403:\n          message.error('æƒé™ä¸è¶³');\n          break;\n          \n        case 404:\n          message.error('è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨');\n          break;\n          \n        case 500:\n          message.error('æœåŠ¡å™¨å†…éƒ¨é”™è¯¯');\n          break;\n          \n        default:\n          if (data?.message) {\n            message.error(data.message);\n          } else {\n            message.error('è¯·æ±‚å¤±è´¥');\n          }\n      }\n    } else if (error.request) {\n      message.error('ç½‘ç»œè¿žæŽ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè®¾ç½®');\n    } else {\n      message.error('è¯·æ±‚é…ç½®é”™è¯¯');\n    }\n\n    return Promise.reject(error);\n  }\n);\n\n// APIæŽ¥å£å®šä¹‰\nexport const adminAPI = {\n  // è®¤è¯ç›¸å…³\n  login: (password) => api.post('/admin/login', { password }),\n  logout: () => api.post('/admin/logout'),\n  getProfile: () => api.get('/admin/profile'),\n\n  // ç”¨æˆ·æ± ç®¡ç†\n  getUserPool: (params) => api.get('/admin/user-pool', { params }),\n  getUserDetail: (userId) => api.get(`/admin/users/${userId}`),\n  updateUserStatus: (userId, status, reason) => \n    api.put(`/admin/users/${userId}/status`, { status, reason }),\n  assignUser: (userId, providerId, notes) => \n    api.post('/admin/assign-user', { userId, providerId, notes }),\n  batchAssignUsers: (userIds, algorithm, preferences) =>\n    api.post('/admin/auto-assign', { userIds, algorithm, preferences }),\n\n  // æœåŠ¡è€…ç®¡ç†\n  getServiceProviders: (params) => api.get('/admin/service-providers', { params }),\n  getProviderDetail: (providerId) => api.get(`/admin/service-providers/${providerId}`),\n  updateProviderInfo: (providerId, data) => \n    api.put(`/admin/service-providers/${providerId}`, data),\n  updateProviderServiceArea: (providerId, serviceArea) =>\n    api.put(`/admin/service-providers/${providerId}/service-area`, { serviceArea }),\n\n  // åˆ†é…ç®¡ç†\n  getAssignments: (params) => api.get('/admin/assignments', { params }),\n  getAssignmentHistory: (params) => api.get('/admin/assignment-history', { params }),\n  cancelAssignment: (assignmentId, reason) =>\n    api.post(`/admin/assignments/${assignmentId}/cancel`, { reason }),\n\n  // ç»Ÿè®¡æ•°æ®\n  getDashboardStats: () => api.get('/admin/dashboard/stats'),\n  getGeoData: () => api.get('/admin/dashboard/geo-data'),\n  getAssignmentTrends: (timeRange) => \n    api.get('/admin/dashboard/assignment-trends', { params: { timeRange } }),\n\n  // æ•°æ®å¯¼å‡º\n  exportUserData: (userIds, format) => \n    api.get('/admin/users/export', { \n      params: { userIds: userIds.join(','), format },\n      responseType: 'blob'\n    }),\n};\n\nexport default api;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}