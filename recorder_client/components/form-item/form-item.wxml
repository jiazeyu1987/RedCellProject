<view class="form-item {{extraClass}} {{required ? 'form-item-required' : ''}} {{error ? 'form-item-error' : ''}}" style="{{extraStyle}}">
  <!-- 标签 -->
  <view class="form-label" wx:if="{{label}}">
    <text class="label-text">{{label}}</text>
    <text class="label-required" wx:if="{{required}}">*</text>
    <view class="label-extra" wx:if="{{labelExtra}}">
      <slot name="label-extra"></slot>
    </view>
  </view>

  <!-- 表单控件 -->
  <view class="form-control">
    <!-- 输入框 -->
    <input 
      wx:if="{{type === 'input'}}"
      class="form-input {{inputClass}}"
      type="{{inputType || 'text'}}"
      value="{{value}}"
      placeholder="{{placeholder}}"
      placeholder-style="{{placeholderStyle}}"
      disabled="{{disabled}}"
      maxlength="{{maxlength}}"
      focus="{{focus}}"
      confirm-type="{{confirmType}}"
      bindinput="onInput"
      bindblur="onBlur"
      bindfocus="onFocus"
      bindconfirm="onConfirm"
    />

    <!-- 文本域 -->
    <textarea 
      wx:elif="{{type === 'textarea'}}"
      class="form-textarea {{inputClass}}"
      value="{{value}}"
      placeholder="{{placeholder}}"
      placeholder-style="{{placeholderStyle}}"
      disabled="{{disabled}}"
      maxlength="{{maxlength}}"
      auto-height="{{autoHeight}}"
      focus="{{focus}}"
      bindinput="onInput"
      bindblur="onBlur"
      bindfocus="onFocus"
      bindconfirm="onConfirm"
    />

    <!-- 选择器 -->
    <picker 
      wx:elif="{{type === 'picker'}}"
      mode="{{pickerMode || 'selector'}}"
      range="{{pickerRange}}"
      range-key="{{pickerRangeKey}}"
      value="{{pickerValue}}"
      start="{{pickerStart}}"
      end="{{pickerEnd}}"
      fields="{{pickerFields}}"
      disabled="{{disabled}}"
      bindchange="onPickerChange"
      bindcancel="onPickerCancel"
    >
      <view class="form-picker {{disabled ? 'form-picker-disabled' : ''}}">
        <text class="picker-text {{!value && !displayValue ? 'picker-placeholder' : ''}}">
          {{displayValue || value || placeholder || '请选择'}}
        </text>
        <text class="picker-arrow">></text>
      </view>
    </picker>

    <!-- 开关 -->
    <switch 
      wx:elif="{{type === 'switch'}}"
      checked="{{value}}"
      disabled="{{disabled}}"
      color="{{switchColor}}"
      bindchange="onSwitchChange"
    />

    <!-- 滑块 -->
    <slider 
      wx:elif="{{type === 'slider'}}"
      value="{{value}}"
      min="{{sliderMin || 0}}"
      max="{{sliderMax || 100}}"
      step="{{sliderStep || 1}}"
      disabled="{{disabled}}"
      show-value="{{showSliderValue}}"
      bindchange="onSliderChange"
      bindchanging="onSliderChanging"
    />

    <!-- 单选框组 -->
    <radio-group 
      wx:elif="{{type === 'radio'}}"
      bindchange="onRadioChange"
    >
      <label 
        class="radio-item {{item.value === value ? 'radio-item-checked' : ''}}" 
        wx:for="{{radioOptions}}" 
        wx:key="{{item.value}}"
      >
        <radio 
          value="{{item.value}}" 
          checked="{{item.value === value}}"
          disabled="{{disabled || item.disabled}}"
          color="{{radioColor}}"
        />
        <text class="radio-text">{{item.label}}</text>
      </label>
    </radio-group>

    <!-- 复选框组 -->
    <checkbox-group 
      wx:elif="{{type === 'checkbox'}}"
      bindchange="onCheckboxChange"
    >
      <label 
        class="checkbox-item" 
        wx:for="{{checkboxOptions}}" 
        wx:key="{{item.value}}"
      >
        <checkbox 
          value="{{item.value}}" 
          checked="{{value && value.includes(item.value)}}"
          disabled="{{disabled || item.disabled}}"
          color="{{checkboxColor}}"
        />
        <text class="checkbox-text">{{item.label}}</text>
      </label>
    </checkbox-group>

    <!-- 自定义内容 -->
    <view wx:elif="{{type === 'custom'}}" class="form-custom">
      <slot name="control"></slot>
    </view>

    <!-- 右侧图标 -->
    <view class="form-icon" wx:if="{{icon}}">
      <image src="{{icon}}" class="icon-image" bindtap="onIconClick" />
    </view>
  </view>

  <!-- 帮助文本 -->
  <view class="form-help" wx:if="{{help}}">
    <text class="help-text">{{help}}</text>
  </view>

  <!-- 错误信息 -->
  <view class="form-error" wx:if="{{error}}">
    <text class="error-text">{{errorMessage}}</text>
  </view>
</view>