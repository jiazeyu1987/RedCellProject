# 开发环境配置说明

## 域名配置问题解决方案

### 问题描述
微信小程序网络请求域名 `https://api.recorder.com` 不在合法域名列表中，导致网络请求失败。

### 解决方案

#### 1. 开发环境临时解决（推荐）

**方法一：开发者工具设置**
1. 打开微信开发者工具
2. 点击右上角的 "详情" 按钮
3. 在 "本地设置" 标签页中
4. 勾选 "不校验合法域名、web-view（业务域名）、TLS 版本以及 HTTPS 证书"

**方法二：使用开发环境配置**
项目已配置开发环境模拟数据：
- 在 `constants/config.js` 中将 `CURRENT_ENV` 设置为 `ENV.DEVELOPMENT`
- 开发环境会自动使用模拟数据，无需真实网络请求

#### 2. 生产环境配置

**配置合法域名：**
1. 登录 [微信公众平台](https://mp.weixin.qq.com/)
2. 进入小程序后台
3. 导航：开发 → 开发设置 → 服务器域名
4. 在 "request合法域名" 中添加：`https://api.recorder.com`

### 环境切换

#### 开发环境
```javascript
// constants/config.js
const CURRENT_ENV = ENV.DEVELOPMENT;
```

特点：
- 使用模拟数据
- 无需配置合法域名
- 快速开发调试

#### 生产环境  
```javascript
// constants/config.js
const CURRENT_ENV = ENV.PRODUCTION;
```

特点：
- 使用真实API
- 需要配置合法域名
- 正式发布使用

### 模拟数据说明

开发环境支持的模拟接口：
- `/auth/login/wechat` - 微信登录
- `/user/info` - 获取用户信息
- 其他接口返回默认成功响应

### 注意事项

1. **开发时**：建议使用开发环境配置，避免域名配置问题
2. **发布前**：必须切换到生产环境并配置合法域名
3. **测试时**：确保在真实设备上测试生产环境配置
4. **安全性**：生产环境不能跳过域名校验

### 常见问题

**Q: 为什么要区分开发和生产环境？**
A: 开发环境可以使用模拟数据快速开发，生产环境确保安全性和合规性。

**Q: 如何确认当前使用的是哪个环境？**
A: 查看控制台日志，开发环境会显示 `[Mock API]` 前缀的日志。

**Q: 可以在真机上使用开发环境吗？**
A: 可以，但建议在发布前切换到生产环境测试。