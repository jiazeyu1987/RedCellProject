<!--设置页面-->
<view class="container">
  <!-- 用户信息区域 -->
  <view class="user-section">
    <view class="user-info" bind:tap="editProfile">
      <view class="user-avatar">
        <text class="avatar-emoji">{{userInfo.avatar}}</text>
      </view>
      <view class="user-details">
        <text class="user-name">{{userInfo.nickname}}</text>
        <text class="user-phone">{{userInfo.phone}}</text>
      </view>
      <view class="edit-icon">
        <text>></text>
      </view>
    </view>
  </view>

  <!-- 账户安全 -->
  <view class="settings-group">
    <view class="group-header">
      <text class="group-title">🔐 账户安全</text>
    </view>
    <view class="group-content">
      <view class="setting-item" bind:tap="changePhone">
        <view class="item-info">
          <text class="item-title">手机号码</text>
          <text class="item-desc">{{userInfo.phone}}</text>
        </view>
        <view class="item-action">
          <text class="action-text">修改</text>
          <text class="arrow">></text>
        </view>
      </view>
      
      <view class="setting-item" bind:tap="changePassword">
        <view class="item-info">
          <text class="item-title">登录密码</text>
          <text class="item-desc">定期更换密码保障账户安全</text>
        </view>
        <view class="item-action">
          <text class="action-text">修改</text>
          <text class="arrow">></text>
        </view>
      </view>
    </view>
  </view>

  <!-- 消息通知 -->
  <view class="settings-group">
    <view class="group-header">
      <text class="group-title">🔔 消息通知</text>
    </view>
    <view class="group-content">
      <view class="setting-item">
        <view class="item-info">
          <text class="item-title">系统通知</text>
          <text class="item-desc">重要系统消息和更新通知</text>
        </view>
        <switch class="setting-switch" 
               checked="{{settings.notifications.system}}" 
               bind:change="toggleNotification" 
               data-type="system" />
      </view>
      
      <view class="setting-item">
        <view class="item-info">
          <text class="item-title">服务通知</text>
          <text class="item-desc">预约提醒、服务状态更新</text>
        </view>
        <switch class="setting-switch" 
               checked="{{settings.notifications.service}}" 
               bind:change="toggleNotification" 
               data-type="service" />
      </view>
      
      <view class="setting-item">
        <view class="item-info">
          <text class="item-title">推广消息</text>
          <text class="item-desc">优惠活动和产品推荐</text>
        </view>
        <switch class="setting-switch" 
               checked="{{settings.notifications.promotion}}" 
               bind:change="toggleNotification" 
               data-type="promotion" />
      </view>
      
      <view class="setting-item">
        <view class="item-info">
          <text class="item-title">社区动态</text>
          <text class="item-desc">社区互动和评论通知</text>
        </view>
        <switch class="setting-switch" 
               checked="{{settings.notifications.community}}" 
               bind:change="toggleNotification" 
               data-type="community" />
      </view>
    </view>
  </view>

  <!-- 隐私设置 -->
  <view class="settings-group">
    <view class="group-header">
      <text class="group-title">🔒 隐私设置</text>
    </view>
    <view class="group-content">
      <view class="setting-item">
        <view class="item-info">
          <text class="item-title">个人资料可见性</text>
          <text class="item-desc">允许其他用户查看您的基本信息</text>
        </view>
        <switch class="setting-switch" 
               checked="{{settings.privacy.profileVisible}}" 
               bind:change="togglePrivacy" 
               data-type="profileVisible" />
      </view>
      
      <view class="setting-item">
        <view class="item-info">
          <text class="item-title">位置服务</text>
          <text class="item-desc">用于提供精准的服务定位</text>
        </view>
        <switch class="setting-switch" 
               checked="{{settings.privacy.locationService}}" 
               bind:change="togglePrivacy" 
               data-type="locationService" />
      </view>
      
      <view class="setting-item">
        <view class="item-info">
          <text class="item-title">数据同步</text>
          <text class="item-desc">在不同设备间同步您的数据</text>
        </view>
        <switch class="setting-switch" 
               checked="{{settings.privacy.dataSync}}" 
               bind:change="togglePrivacy" 
               data-type="dataSync" />
      </view>
    </view>
  </view>

  <!-- 偏好设置 -->
  <view class="settings-group">
    <view class="group-header">
      <text class="group-title">🎨 偏好设置</text>
    </view>
    <view class="group-content">
      <view class="setting-item" bind:tap="selectTheme">
        <view class="item-info">
          <text class="item-title">主题模式</text>
          <text class="item-desc">{{getThemeName(settings.preferences.theme)}}</text>
        </view>
        <view class="item-action">
          <text class="arrow">></text>
        </view>
      </view>
      
      <view class="setting-item" bind:tap="selectLanguage">
        <view class="item-info">
          <text class="item-title">语言设置</text>
          <text class="item-desc">{{getLanguageName(settings.preferences.language)}}</text>
        </view>
        <view class="item-action">
          <text class="arrow">></text>
        </view>
      </view>
    </view>
  </view>

  <!-- 存储管理 -->
  <view class="settings-group">
    <view class="group-header">
      <text class="group-title">💾 存储管理</text>
    </view>
    <view class="group-content">
      <view class="storage-info">
        <view class="storage-details">
          <text class="storage-title">缓存大小</text>
          <text class="storage-size">{{storageInfo.used}}MB / {{storageInfo.total}}MB</text>
        </view>
        <view class="storage-bar">
          <view class="storage-used" style="width: {{getStoragePercentage()}}%"></view>
        </view>
      </view>
      
      <view class="setting-item" bind:tap="clearCache">
        <view class="item-info">
          <text class="item-title">清理缓存</text>
          <text class="item-desc">清理临时文件释放存储空间</text>
        </view>
        <view class="item-action">
          <text class="action-text">清理</text>
          <text class="arrow">></text>
        </view>
      </view>
    </view>
  </view>

  <!-- 应用信息 -->
  <view class="settings-group">
    <view class="group-header">
      <text class="group-title">ℹ️ 应用信息</text>
    </view>
    <view class="group-content">
      <view class="setting-item" bind:tap="checkUpdate">
        <view class="item-info">
          <text class="item-title">检查更新</text>
          <text class="item-desc">当前版本 v1.0.0</text>
        </view>
        <view class="item-action">
          <text class="action-text">检查</text>
          <text class="arrow">></text>
        </view>
      </view>
      
      <view class="setting-item" bind:tap="viewUserAgreement">
        <view class="item-info">
          <text class="item-title">用户协议</text>
          <text class="item-desc">查看服务条款和使用协议</text>
        </view>
        <view class="item-action">
          <text class="arrow">></text>
        </view>
      </view>
      
      <view class="setting-item" bind:tap="viewPrivacyPolicy">
        <view class="item-info">
          <text class="item-title">隐私政策</text>
          <text class="item-desc">了解我们如何保护您的隐私</text>
        </view>
        <view class="item-action">
          <text class="arrow">></text>
        </view>
      </view>
    </view>
  </view>

  <!-- 帮助与支持 -->
  <view class="settings-group">
    <view class="group-header">
      <text class="group-title">❓ 帮助与支持</text>
    </view>
    <view class="group-content">
      <view class="setting-item" bind:tap="contactCustomerService">
        <view class="item-info">
          <text class="item-title">联系客服</text>
          <text class="item-desc">400-888-8888</text>
        </view>
        <view class="item-action">
          <text class="action-text">拨打</text>
          <text class="arrow">></text>
        </view>
      </view>
      
      <view class="setting-item" bind:tap="aboutUs">
        <view class="item-info">
          <text class="item-title">关于我们</text>
          <text class="item-desc">了解更多关于健康守护</text>
        </view>
        <view class="item-action">
          <text class="arrow">></text>
        </view>
      </view>
    </view>
  </view>

  <!-- 退出登录 -->
  <view class="logout-section">
    <button class="logout-btn" bind:tap="logout">
      <text>退出登录</text>
    </button>
  </view>

  <!-- 底部间距 -->
  <view class="bottom-space"></view>
</view>