<!--ç”¨æˆ·ç®¡ç†é¡µé¢-->
<view class="container">
  <!-- ç®¡ç†å‘˜å¤´éƒ¨ -->
  <view class="admin-header">
    <view class="header-info">
      <text class="admin-title">ğŸ‘‘ ç®¡ç†å‘˜æ§åˆ¶å°</text>
      <text class="admin-desc">ç”¨æˆ·ä¿¡æ¯ç®¡ç†ç³»ç»Ÿ</text>
    </view>
    <button class="exit-btn" bind:tap="exitAdmin">
      <text class="exit-icon">ğŸšª</text>
      <text>é€€å‡º</text>
    </button>
  </view>

  <!-- ç»Ÿè®¡å¡ç‰‡ -->
  <view class="stats-section">
    <view class="stat-card">
      <text class="stat-number">{{totalUsers}}</text>
      <text class="stat-label">æ€»ç”¨æˆ·</text>
      <text class="stat-icon">ğŸ‘¥</text>
    </view>
    <view class="stat-card active">
      <text class="stat-number">{{activeUsers}}</text>
      <text class="stat-label">æ´»è·ƒç”¨æˆ·</text>
      <text class="stat-icon">ğŸŸ¢</text>
    </view>
    <view class="stat-card inactive">
      <text class="stat-number">{{inactiveUsers}}</text>
      <text class="stat-label">éæ´»è·ƒ</text>
      <text class="stat-icon">ğŸ”´</text>
    </view>
  </view>

  <!-- æœç´¢å’Œç­›é€‰ -->
  <view class="search-section">
    <view class="search-box">
      <input class="search-input" 
             placeholder="æœç´¢ç”¨æˆ·åã€æ‰‹æœºå·æˆ–åœ°å€..." 
             value="{{searchKeyword}}" 
             bind:input="onSearchInput" />
      <view wx:if="{{searchKeyword}}" class="clear-search" bind:tap="clearSearch">
        <text class="clear-icon">âœ•</text>
      </view>
      <view wx:else class="search-icon">
        <text>ğŸ”</text>
      </view>
    </view>
  </view>

  <!-- ç­›é€‰æ ‡ç­¾ -->
  <view class="filter-section">
    <scroll-view class="filter-scroll" scroll-x>
      <view class="filter-list">
        <view wx:for="{{filters}}" wx:key="id" 
              class="filter-item {{currentFilter === item.id ? 'active' : ''}}"
              bind:tap="selectFilter" 
              data-filter="{{item.id}}">
          <text class="filter-icon">{{item.icon}}</text>
          <text class="filter-name">{{item.name}}</text>
        </view>
      </view>
    </scroll-view>
  </view>

  <!-- æ’åºå’Œæ“ä½œ -->
  <view class="toolbar">
    <view class="sort-controls">
      <button class="sort-btn" bind:tap="selectSort">
        <text class="sort-icon">ğŸ“Š</text>
        <text>æ’åº</text>
      </button>
      <button class="order-btn" bind:tap="toggleSortOrder">
        <text class="order-icon">{{sortOrder === 'asc' ? 'â¬†ï¸' : 'â¬‡ï¸'}}</text>
      </button>
    </view>
    <view class="action-controls">
      <button class="action-btn" bind:tap="refreshData">
        <text class="action-icon">ğŸ”„</text>
        <text>åˆ·æ–°</text>
      </button>
      <button class="action-btn" bind:tap="exportUserData">
        <text class="action-icon">ğŸ“¤</text>
        <text>å¯¼å‡º</text>
      </button>
    </view>
  </view>

  <!-- ç”¨æˆ·åˆ—è¡¨ -->
  <view class="users-section">
    <view wx:if="{{loading}}" class="loading-state">
      <text class="loading-icon">â³</text>
      <text class="loading-text">åŠ è½½ç”¨æˆ·æ•°æ®ä¸­...</text>
    </view>

    <view wx:elif="{{filteredUsers.length > 0}}" class="user-list">
      <view wx:for="{{filteredUsers}}" wx:key="id" 
            class="user-card" 
            bind:tap="viewUserDetail" 
            data-user="{{item}}">
        <view class="user-header">
          <view class="user-basic">
            <view class="user-avatar">
              <text>{{item.avatar}}</text>
            </view>
            <view class="user-info">
              <view class="user-name-line">
                <text class="user-name">{{item.nickname}}</text>
                <view class="user-status status-{{item.status}}">
                  <text wx:if="{{item.status === 'active'}}">æ´»è·ƒ</text>
                  <text wx:elif="{{item.status === 'inactive'}}">éæ´»è·ƒ</text>
                </view>
              </view>
              <text class="user-phone">{{item.phone}}</text>
              <view class="user-tags">
                <text class="member-tag {{item.memberLevel === 'vip' ? 'vip' : 'regular'}}">
                  {{item.memberLevel === 'vip' ? 'ğŸ‘‘ VIP' : 'ğŸ« æ™®é€š'}}
                </text>
                <text class="service-tag">{{item.serviceCount}}æ¬¡æœåŠ¡</text>
              </view>
            </view>
          </view>
          <view class="user-arrow">
            <text>></text>
          </view>
        </view>

        <view class="user-details">
          <view class="detail-row">
            <text class="detail-label">ğŸ“ åœ°å€ï¼š</text>
            <text class="detail-value">{{item.address}}</text>
          </view>
          <view class="detail-row">
            <text class="detail-label">â° æœ€åè®¿é—®ï¼š</text>
            <text class="detail-value">{{item.lastVisit}}</text>
          </view>
          <view class="detail-row">
            <text class="detail-label">ğŸ¥ å¥åº·çŠ¶å†µï¼š</text>
            <text class="detail-value">{{item.healthCondition}}</text>
          </view>
        </view>
      </view>
    </view>

    <!-- æ— æ•°æ®çŠ¶æ€ -->
    <view wx:else class="empty-state">
      <text class="empty-icon">ğŸ”</text>
      <text class="empty-text">æœªæ‰¾åˆ°åŒ¹é…çš„ç”¨æˆ·</text>
      <text class="empty-desc">è¯•è¯•è°ƒæ•´æœç´¢æ¡ä»¶æˆ–ç­›é€‰å™¨</text>
      <button class="clear-filter-btn" bind:tap="clearSearch">
        æ¸…ç©ºç­›é€‰
      </button>
    </view>
  </view>

  <!-- åº•éƒ¨å®‰å…¨æç¤º -->
  <view class="security-footer">
    <text class="security-text">ğŸ”’ æ‚¨æ­£åœ¨ä½¿ç”¨ç®¡ç†å‘˜æƒé™è®¿é—®ç”¨æˆ·æ•æ„Ÿä¿¡æ¯</text>
    <text class="security-text">è¯·ä¸¥æ ¼éµå®ˆç›¸å…³æ³•å¾‹æ³•è§„å’Œéšç§ä¿æŠ¤æ”¿ç­–</text>
  </view>
</view>