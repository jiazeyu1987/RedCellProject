<!-- åœ°å€ç®¡ç†é¡µé¢ -->
<view class="container">
  <!-- åœ°å€åˆ—è¡¨ -->
  <view class="address-list">
    <view class="address-item" wx:for="{{addressList}}" wx:key="id">
      <view class="address-content">
        <view class="address-header">
          <text class="contact-name">{{item.contactName}}</text>
          <text class="contact-phone">{{item.contactPhone}}</text>
          <view class="default-tag" wx:if="{{item.isDefault}}">é»˜è®¤</view>
        </view>
        
        <view class="address-detail">
          <text class="region">{{item.province}} {{item.city}} {{item.district}}</text>
          <text class="detail">{{item.detail}}</text>
        </view>
      </view>

      <view class="address-actions">
        <button class="action-btn" wx:if="{{!item.isDefault}}" bindtap="setDefault" data-id="{{item.id}}">è®¾ä¸ºé»˜è®¤</button>
        <button class="action-btn" bindtap="editAddress" data-address="{{item}}">ç¼–è¾‘</button>
        <button class="action-btn danger" bindtap="deleteAddress" data-id="{{item.id}}">åˆ é™¤</button>
      </view>
    </view>
  </view>

  <!-- æ–°å¢åœ°å€æŒ‰é’® -->
  <view class="add-address">
    <button class="add-btn" bindtap="addAddress">
      <text class="plus-icon">+</text>
      <text>æ–°å¢åœ°å€</text>
    </button>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{addressList.length === 0}}">
    <text class="empty-icon">ğŸ“</text>
    <text class="empty-text">æš‚æ— åœ°å€ä¿¡æ¯</text>
    <button class="empty-action" bindtap="addAddress">æ·»åŠ åœ°å€</button>
  </view>
</view>

<!-- æ–°å¢/ç¼–è¾‘åœ°å€å¼¹çª— -->
<view class="modal-overlay" wx:if="{{showAddModal}}" bindtap="closeModal">
  <view class="address-modal" catchtap="">
    <view class="modal-header">
      <text class="modal-title">{{editingAddress.id ? 'ç¼–è¾‘åœ°å€' : 'æ–°å¢åœ°å€'}}</text>
      <text class="modal-close" bindtap="closeModal">Ã—</text>
    </view>
    
    <view class="modal-content">
      <view class="form-item">
        <text class="form-label">è”ç³»äºº</text>
        <input class="form-input" placeholder="è¯·è¾“å…¥è”ç³»äººå§“å" value="{{editingAddress.contactName}}" bindinput="onInput" data-field="contactName"/>
      </view>
      
      <view class="form-item">
        <text class="form-label">è”ç³»ç”µè¯</text>
        <input class="form-input" type="number" placeholder="è¯·è¾“å…¥æ‰‹æœºå·" value="{{editingAddress.contactPhone}}" bindinput="onInput" data-field="contactPhone"/>
      </view>
      
      <view class="form-item">
        <text class="form-label">æ‰€åœ¨åœ°åŒº</text>
        <picker mode="region" value="{{[editingAddress.province, editingAddress.city, editingAddress.district]}}" bindchange="onRegionChange">
          <view class="picker-content">
            {{editingAddress.province && editingAddress.city && editingAddress.district ? 
              editingAddress.province + ' ' + editingAddress.city + ' ' + editingAddress.district : 
              'è¯·é€‰æ‹©çœå¸‚åŒº'}}
          </view>
        </picker>
      </view>
      
      <view class="form-item">
        <text class="form-label">è¯¦ç»†åœ°å€</text>
        <textarea class="form-textarea" placeholder="è¯·è¾“å…¥è¯¦ç»†åœ°å€ï¼ˆå¦‚é“è·¯ã€é—¨ç‰Œå·ã€å°åŒºã€æ¥¼æ ‹å·ç­‰ï¼‰" value="{{editingAddress.detail}}" bindinput="onInput" data-field="detail" maxlength="100"></textarea>
      </view>
      
      <view class="form-item">
        <view class="default-switch" bindtap="toggleDefault">
          <text class="switch-label">è®¾ä¸ºé»˜è®¤åœ°å€</text>
          <view class="switch {{editingAddress.isDefault ? 'checked' : ''}}">
            <view class="switch-thumb"></view>
          </view>
        </view>
      </view>
    </view>
    
    <view class="modal-actions">
      <button class="modal-btn secondary" bindtap="closeModal">å–æ¶ˆ</button>
      <button class="modal-btn primary" bindtap="saveAddress">ä¿å­˜</button>
    </view>
  </view>
</view>