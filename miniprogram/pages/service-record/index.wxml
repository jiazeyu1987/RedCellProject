<!-- æœåŠ¡è®°å½•é¡µé¢ -->
<view class="container">
  <!-- ç­›é€‰å™¨ -->
  <view class="filter-bar">
    <view class="filter-item {{statusFilter === 'all' ? 'active' : ''}}" bindtap="filterByStatus" data-status="all">
      å…¨éƒ¨
    </view>
    <view class="filter-item {{statusFilter === 'completed' ? 'active' : ''}}" bindtap="filterByStatus" data-status="completed">
      å·²å®Œæˆ
    </view>
    <view class="filter-item {{statusFilter === 'scheduled' ? 'active' : ''}}" bindtap="filterByStatus" data-status="scheduled">
      å·²é¢„çº¦
    </view>
    <view class="filter-item {{statusFilter === 'cancelled' ? 'active' : ''}}" bindtap="filterByStatus" data-status="cancelled">
      å·²å–æ¶ˆ
    </view>
  </view>

  <!-- æœåŠ¡è®°å½•åˆ—è¡¨ -->
  <view class="record-list">
    <view class="record-item" wx:for="{{filteredRecords}}" wx:key="id" bindtap="viewDetail" data-record="{{item}}">
      <view class="record-header">
        <text class="service-type">{{item.serviceType}}</text>
        <view class="status-badge {{item.status}}">{{item.statusText}}</view>
      </view>
      
      <view class="record-info">
        <view class="info-row">
          <text class="info-label">æœåŠ¡æ—¶é—´ï¼š</text>
          <text class="info-value">{{item.serviceDate}} {{item.serviceTime}}</text>
        </view>
        <view class="info-row">
          <text class="info-label">æœåŠ¡åœ°å€ï¼š</text>
          <text class="info-value">{{item.address}}</text>
        </view>
        <view class="info-row">
          <text class="info-label">æœåŠ¡è´¹ç”¨ï¼š</text>
          <text class="info-value price">Â¥{{item.price}}</text>
        </view>
        <view class="info-row" wx:if="{{item.nurseInfo}}">
          <text class="info-label">åŒ»æŠ¤äººå‘˜ï¼š</text>
          <text class="info-value">{{item.nurseInfo.name}} {{item.nurseInfo.title}}</text>
        </view>
      </view>

      <view class="record-actions" wx:if="{{item.status === 'completed'}}">
        <button class="action-btn secondary" bindtap="viewReport" data-id="{{item.id}}" catchtap="">æŸ¥çœ‹æŠ¥å‘Š</button>
        <button class="action-btn secondary" bindtap="watchVideo" data-id="{{item.id}}" catchtap="">è§‚çœ‹å½•åƒ</button>
        <button class="action-btn primary" bindtap="rateService" data-id="{{item.id}}" catchtap="">è¯„ä»·æœåŠ¡</button>
      </view>

      <view class="record-actions" wx:if="{{item.status === 'scheduled'}}">
        <button class="action-btn secondary" bindtap="contactNurse" data-nurse="{{item.nurseInfo}}" catchtap="">è”ç³»åŒ»æŠ¤</button>
        <button class="action-btn danger" bindtap="cancelService" data-id="{{item.id}}" catchtap="">å–æ¶ˆæœåŠ¡</button>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{filteredRecords.length === 0}}">
    <text class="empty-icon">ğŸ“‹</text>
    <text class="empty-text">æš‚æ— æœåŠ¡è®°å½•</text>
    <button class="empty-action" bindtap="goToBooking">ç«‹å³é¢„çº¦æœåŠ¡</button>
  </view>
</view>