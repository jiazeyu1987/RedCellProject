<!-- é¢„çº¦å†å²é¡µé¢ -->
<view class="container">
  <!-- çŠ¶æ€ç­›é€‰ -->
  <view class="filter-bar">
    <view class="filter-item {{statusFilter === 'all' ? 'active' : ''}}" bindtap="filterByStatus" data-status="all">
      å…¨éƒ¨
    </view>
    <view class="filter-item {{statusFilter === 'pending' ? 'active' : ''}}" bindtap="filterByStatus" data-status="pending">
      å¾…æœåŠ¡
    </view>
    <view class="filter-item {{statusFilter === 'completed' ? 'active' : ''}}" bindtap="filterByStatus" data-status="completed">
      å·²å®Œæˆ
    </view>
    <view class="filter-item {{statusFilter === 'cancelled' ? 'active' : ''}}" bindtap="filterByStatus" data-status="cancelled">
      å·²å–æ¶ˆ
    </view>
  </view>

  <!-- é¢„çº¦åˆ—è¡¨ -->
  <view class="booking-list" wx:if="{{!loading}}">
    <view class="booking-item" wx:for="{{filteredBookings}}" wx:key="id" bindtap="viewDetail" data-booking="{{item}}">
      <view class="booking-header">
        <text class="service-type">{{item.serviceType}}</text>
        <view class="status-badge {{item.status}}">{{item.statusText}}</view>
      </view>
      
      <view class="booking-info">
        <view class="info-row">
          <text class="info-label">ğŸ“… æœåŠ¡æ—¶é—´ï¼š</text>
          <text class="info-value">{{item.serviceDate}} {{item.serviceTime}}</text>
        </view>
        <view class="info-row">
          <text class="info-label">ğŸ“ æœåŠ¡åœ°å€ï¼š</text>
          <text class="info-value">{{item.address}}</text>
        </view>
        <view class="info-row">
          <text class="info-label">ğŸ’° æœåŠ¡è´¹ç”¨ï¼š</text>
          <text class="info-value price">Â¥{{item.price}}</text>
        </view>
        <view class="info-row" wx:if="{{item.nurseInfo}}">
          <text class="info-label">ğŸ‘©â€âš•ï¸ åŒ»æŠ¤äººå‘˜ï¼š</text>
          <text class="info-value">{{item.nurseInfo.name}} {{item.nurseInfo.title}}</text>
        </view>
        <view class="info-row" wx:if="{{item.cancelReason}}">
          <text class="info-label">â— å–æ¶ˆåŸå› ï¼š</text>
          <text class="info-value">{{item.cancelReason}}</text>
        </view>
      </view>

      <view class="booking-actions" wx:if="{{item.status === 'pending'}}">
        <button class="action-btn secondary" bindtap="contactNurse" data-nurse="{{item.nurseInfo}}" catchtap="" wx:if="{{item.nurseInfo}}">è”ç³»åŒ»æŠ¤</button>
        <button class="action-btn danger" bindtap="cancelBooking" data-id="{{item.id}}" catchtap="">å–æ¶ˆé¢„çº¦</button>
      </view>

      <view class="booking-actions" wx:if="{{item.status === 'cancelled'}}">
        <button class="action-btn primary" bindtap="rebookService" data-booking="{{item}}" catchtap="">é‡æ–°é¢„çº¦</button>
      </view>

      <view class="booking-time">
        <text class="create-time">é¢„çº¦æ—¶é—´ï¼š{{item.createTime}}</text>
      </view>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-state" wx:if="{{loading}}">
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{!loading && filteredBookings.length === 0}}">
    <text class="empty-icon">ğŸ“…</text>
    <text class="empty-text">æš‚æ— é¢„çº¦è®°å½•</text>
    <button class="empty-action" bindtap="goToBooking">ç«‹å³é¢„çº¦</button>
  </view>
</view>