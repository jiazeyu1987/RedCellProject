<!--pages/health-records/index.wxml-->
<view class="container">
  <!-- å¤´éƒ¨å¯¼èˆª -->
  <view class="header">
    <view class="nav-bar">
      <view class="nav-left" bindtap="goBack">
        <text class="back-icon">â€¹</text>
        <text class="back-text">è¿”å›</text>
      </view>
      <view class="nav-title">å¥åº·è®°å½•</view>
      <view class="nav-right"></view>
    </view>
  </view>

  <!-- ç­›é€‰é€‰é¡¹ -->
  <view class="filter-section">
    <scroll-view class="filter-scroll" scroll-x="true">
      <view class="filter-item {{typeFilter === 'all' ? 'active' : ''}}" 
            bindtap="filterByType" data-type="all">
        å…¨éƒ¨
      </view>
      <view class="filter-item {{typeFilter === 'bloodPressure' ? 'active' : ''}}" 
            bindtap="filterByType" data-type="bloodPressure">
        è¡€å‹
      </view>
      <view class="filter-item {{typeFilter === 'bloodSugar' ? 'active' : ''}}" 
            bindtap="filterByType" data-type="bloodSugar">
        è¡€ç³–
      </view>
      <view class="filter-item {{typeFilter === 'heartRate' ? 'active' : ''}}" 
            bindtap="filterByType" data-type="heartRate">
        å¿ƒç‡
      </view>
      <view class="filter-item {{typeFilter === 'weight' ? 'active' : ''}}" 
            bindtap="filterByType" data-type="weight">
        ä½“é‡
      </view>
    </scroll-view>
  </view>

  <!-- è®°å½•åˆ—è¡¨ -->
  <view class="records-section">
    <view wx:if="{{loading && filteredRecords.length === 0}}" class="loading-state">
      <text class="loading-text">åŠ è½½ä¸­...</text>
    </view>
    
    <view wx:elif="{{filteredRecords.length === 0}}" class="empty-state">
      <text class="empty-icon">ğŸ“Š</text>
      <text class="empty-text">æš‚æ— å¥åº·è®°å½•</text>
      <text class="empty-tip">ç‚¹å‡»é¦–é¡µçš„å¿«é€Ÿè®°å½•æ·»åŠ æ•°æ®</text>
    </view>

    <view wx:else class="record-list">
      <view class="record-item" 
            wx:for="{{filteredRecords}}" 
            wx:key="id"
            bindtap="viewRecordDetail"
            data-record="{{item}}">
        <view class="record-main">
          <view class="record-left">
            <view class="record-type">
              <text class="type-name">{{item.typeName}}</text>
              <text class="type-status" style="color: {{item.statusColor}}">{{item.statusText}}</text>
            </view>
            <view class="record-value">
              <text class="value-text">{{item.value}}</text>
              <text class="unit-text">{{item.unit}}</text>
            </view>
            <view class="record-time">
              <text class="date-text">{{item.date}}</text>
              <text class="time-text">{{item.time}}</text>
            </view>
          </view>
          <view class="record-right">
            <text class="delete-btn" 
                  bindtap="deleteRecord" 
                  data-id="{{item.id}}"
                  catchtap="true">åˆ é™¤</text>
          </view>
        </view>
        <view wx:if="{{item.notes}}" class="record-notes">
          <text class="notes-text">å¤‡æ³¨ï¼š{{item.notes}}</text>
        </view>
      </view>
    </view>

    <!-- åŠ è½½æ›´å¤š -->
    <view wx:if="{{loading && filteredRecords.length > 0}}" class="load-more">
      <text class="load-text">åŠ è½½ä¸­...</text>
    </view>
    
    <view wx:if="{{!hasMore && filteredRecords.length > 0}}" class="load-end">
      <text class="end-text">å·²æ˜¾ç¤ºå…¨éƒ¨è®°å½•</text>
    </view>
  </view>
</view>